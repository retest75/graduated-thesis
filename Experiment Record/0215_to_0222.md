# **實驗進度(0215 - 0222)**

## 上週進度
年假，無進度

## 本週進度
* 關於年度報表 (可從`data_check.py`檔中查看相關code)
  * 眼底鏡匯出報表：似乎包含該年度所有眼底鏡影像的資料(去個資編號、影像編號)
  * 呼吸中止症報表：似乎包含該年度所有呼吸中止症患者的診斷碼
  * 眼底鏡and呼吸中止症匯出報表：似乎包含該年度所有具有中止症的眼底鏡檔案編號(上述兩者交集，但個數極少)
  * 似乎是**極端不平衡**資料 
    * 從下表(1)中可以看出，所有影像(Fundus)與具有中止症的影像(Fundus+Sleep)的數量極端不平衡
  * 醫院所提供的每年度影像資料與每年度報表數量**無法匹配**，見下表(2)

| Years | Fundus (A) | Sleep (B) | Fundus + Sleep (C) | A & C | B & C |
| :---: |  :----:    | :---:     | :------------:     | :---: | :---: |
| 2022  |  3392      |  619      |       28           | 10    | 28    |
| 2021  |  3440      |  606      |       26           | 11    | 26    |
| 2020  |  3447      |  633      |       16           | 4     | 16    |
| 2019  |  3445      |  676      |       25           | 9     | 25    |
| 2018  |  3436      |  737      |       17           | 8     | 17    |

| Years | Total images | Reported images |
| :---: | :---:        | :---:           | 
| 2022  | 20276        | 3392            |
| 2021  | 21933        | 3440            |
| 2020  | 21018        | 3447            |
| 2019  | 21960        | 3445            |
| 2018  | 17365        | 3436            |

* 檔案整理 (可從`data_clean.py`檔中查看相關code)
  * 刪除每年度重複的眼底影像資料，見下表(1)
    * 重複檔案通常為`xxxxxx_L.jpg`或`xxxxxx_L(1).jpg`
    * 刪除原始檔案，僅保留結尾是(1)或(2)的檔案
    * 意義：重複通常是因為第一張品質不佳，所以再次拍攝第二張
  * 劃分左右眼
    * 2022年測試完成，可將資料集劃分為左右眼
    * 左右眼資料分別存在`year/Left`與`year/Right`中，且不分月份
    * 劃分後計算資料集大小是否正確

| Years | Total images | After delete |
| :---: | :---:        | :---:        | 
| 2022  | 20276        | 19204        |
| 2021  | 21933        | 19779        |
| 2020  | 21018        | 19788        |
| 2019  | 21960        | 21413        |
| 2018  | 17365        | 16732        |